<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="{{ url_for('static', filename='Icon/favicon-32x32.png') }}"
/>
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='Icon/favicon-16x16.png') }}" />
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Lobster&display=swap');

    body {
      background-color: #1e1e1f;
      color: #ffffff;
    }
    .container {
      margin-top: 20px;
    }
    .grid-item {
      background-color: #2b2b2b;
      padding: 20px;
      border: 2px solid #9400d3;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .form-container {
      margin-top: 20px;
    }
    .btn {
      width: 60px; 
    }
    .btn_add{
      width: auto; 
    }
    .btn-delete {
      background-color: #9400d3;
      color: white;
    }
    .btn-delete:hover {
      background-color: #7500a9;
    }
    .btn-add-song,
    .btn-submit {
      background-color: #007bff;
      color: white;
    }
    .btn-add-song:hover,
    .btn-submit:hover {
      background-color: #0056b3;
    }
    .btn-toggle {
      background-color: #ffd700;
      color: black;
    }
    .btn-toggle:hover {
      background-color: #e5c100;
    }
    .hidden {
      display: none;
    }
    .title {
      font-family: 'Lobster', cursive;
      color: #d3d3d3;
    }
    .your-section {
      height: 400px; /* Adjust height to prevent scrolling */
      overflow-y: auto;
    }
    .add-section {
      height: 550px;
      overflow-y: auto;
      border: 2px solid #9400d3;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }
    .name {
      font-family: "Lobster", cursive;
      color: #f0f0f0; 
      font-size: 3rem;
      text-align: center;
      font-size: 4.5rem;
    }
    .song-list {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <h1 class="name">Artist Page</h1>
      </div>
    </div>

    <div class="row">
      <!-- Concerts Column -->
      <div class="col-md-4">
        <div class="grid-item">
          <h2 class="title">Your Concerts</h2>
          <div class="your-section">
            <table class="table table-dark table-striped">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Date</th>
                  <th>Price</th>
                  <th>Tickets</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for concert in concerts %}
                <tr>
                  <td>{{ concert[1] }}</td>
                  <td>{{ concert[2] }}</td>
                  <td>${{ concert[3] }}</td>
                  <td>{{ concert[4] }}</td>
                  <td>
                    <form action="{{ url_for('artist_page') }}" method="POST" class="d-inline">
                      <input type="hidden" name="action" value="delete_concert" />
                      <input type="hidden" name="concert_id" value="{{ concert[0] }}" />
                      <button class="btn btn-delete btn-sm" type="submit">Delete</button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Songs Column -->
      <div class="col-md-4">
        <div class="grid-item">
          <h2 class="title">Your Songs</h2>
          <div class="your-section">
            <table class="table table-dark table-striped">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Album ID</th>
                  <th>Duration</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for song in songs %}
                <tr>
                  <td>{{ song[1] }}</td>
                  <td>{{ song[2] }}</td>
                  <td>{{ song[5] }}</td>
                  <td>
                    <form action="{{ url_for('artist_page') }}" method="POST" class="d-inline">
                      <input type="hidden" name="action" value="delete_song" />
                      <input type="hidden" name="song_id" value="{{ song[0] }}" />
                      <button class="btn btn-delete btn-sm" type="submit">Delete</button>
                    </form>
                    <form action="{{ url_for('artist_page') }}" method="POST" class="d-inline">
                      <input type="hidden" name="action" value="toggle_limit" />
                      <input type="hidden" name="song_id" value="{{ song[0] }}" />
                      <button class="btn btn-toggle btn-sm">{{ 'Limit' if not song[6] else 'Unlimit' }}</button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Albums Column -->
      <div class="col-md-4">
        <div class="grid-item">
          <h2 class="title">Your Albums</h2>
          <div class="your-section">
            <table class="table table-dark table-striped">
              <thead>
                <tr>
                  <th>Album Name</th>
                  <th>Release Date</th>
                  <th>Genre</th>
                  <th>Songs</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for album in albums %}
                <tr>
                  <td>{{ album[1] }}</td>
                  <td>{{ album[2] }}</td>
                  <td>{{ album[3] }}</td>
                  <td>
                    <!-- List songs in the album -->
                    {% set album_songs = [] %}
                    {% for song in songs %}
                    {% if song[2] == album[0] %}
                    {% set _ = album_songs.append(song[1]) %}
                    {% endif %}
                    {% endfor %}
                    {{ album_songs | join(', ') }}
                  </td>
                  <td>
                    <form action="{{ url_for('artist_page') }}" method="POST" class="d-inline">
                      <input type="hidden" name="action" value="delete_album" />
                      <input type="hidden" name="album_id" value="{{ album[0] }}" />
                      <button class="btn btn-delete btn-sm" type="submit">Delete</button>
                    </form>
                    <button class="btn btn-add-song btn-sm" onclick="showAddSongForm({{ album[0] }})">Add Songs</button>
                    <div id="add-song-form-{{ album[0] }}" class="hidden">
                      <form method="post" action="{{ url_for('artist_page') }}">
                        <input type="hidden" name="action" value="add_songs_to_album" />
                        <input type="hidden" name="album_id" value="{{ album[0] }}" />
                        <div class="form-group">
                          <label for="song_id">Song ID to add:</label>
                          <input type="text" name="song_id" class="form-control" required />
                        </div>
                        <button class="btn btn-submit btn-sm" type="submit">Add Song</button>
                      </form>
                    </div>
                  </td>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Add New Sections -->
    <div class="row">
      <div class="col-md-4">
        <div class="add-section">
          <h2 class="title">Add New Concert</h2>
          <form action="{{ url_for('artist_page') }}" method="POST">
            <input type="hidden" name="action" value="add_concert" />
            <div class="form-group">
              <label for="name">Concert Name:</label>
              <input type="text" id="name" name="name" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="date">Date:</label>
              <input type="date" id="date" name="date" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="price">Price:</label>
              <input type="number" id="price" name="price" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="tickets">Number of Tickets:</label>
              <input type="number" id="tickets" name="tickets" class="form-control" required />
            </div>
            <button class="btn btn_add btn-submit btn-block" type="submit">Add Concert</button>
          </form>
        </div>
      </div>

      <div class="col-md-4">
        <div class="add-section">
          <h2 class="title">Add New Song</h2>
          <form action="{{ url_for('artist_page') }}" method="POST">
            <input type="hidden" name="action" value="add_song" />
            <div class="form-group">
              <label for="song_name">Song Name:</label>
              <input type="text" id="song_name" name="song_name" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="album_id">Album ID:</label>
              <input type="text" id="album_id" name="album_id" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="file">File Name:</label>
              <input type="text" id="file" name="file" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="lyrics">Lyrics:</label>
              <input type="text" id="lyrics" name="lyrics" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="release_date">Release Date:</label>
              <input type="date" id="release_date" name="release_date" class="form-control" required />
            </div>
            <div class="genre">
              <label for="genre">Genre:</label>
              <input type="text" id="genre" name="genre" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="age_rating">Age Rating:</label>
              <input type="number" id="age_rating" name="age_rating" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="duration">Duration:</label>
              <input type="number" id="duration" name="duration" class="form-control" required />
            </div>
            <button class=" btn btn_add btn-submit btn-block" type="submit">Add Song</button>
          </form>
        </div>
      </div>

      <div class="col-md-4">
        <div class="add-section">
          <h2 class="title">Add New Album</h2>
          <form action="{{ url_for('artist_page') }}" method="POST">
            <input type="hidden" name="action" value="add_album" />
            <div class="form-group">
              <label for="album_name">Album Name:</label>
              <input type="text" id="album_name" name="album_name" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="release_date">Release Date:</label>
              <input type="date" id="release_date" name="release_date" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="genre">Genre:</label>
              <input type="text" id="genre" name="genre" class="form-control" required />
            </div>
            <button class=" btn btn_add btn-submit btn-block" type="submit">Add Album</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>
    function showAddSongForm(albumId) {
      var form = document.getElementById("add-song-form-" + albumId);
      form.classList.toggle("hidden");
    }
  </script>
</body>
</html>
